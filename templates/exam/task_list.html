{% extends "base.html" %}

{% block content %}
  <h1>TODO list
    <a href="{% url 'exam:task-create' %}" class="btn btn-primary link-to-page">
      Add new task
    </a>
  </h1>
  {% if task_list %}
    <div class="container">
      {% for task in task_list %}
        <div class="card mb-3">
          <div class="card-body d-flex justify-content-between">
            <div>
              <h3 class="card-title">{{ task.content }}</h3>
              {% if task.is_done %}
                <p class="text-success">Done</p>
              {% else %}
                <p class="text-danger">Not done</p>
              {% endif %}
              <p class="card-text">{{ task.create_date }}
                {% if task.deadline %}
                  <p><strong style="color: red">Deadline:</strong> {{ task.deadline }}</p>
                {% endif %}
              </p>
              <p>Tags:</p>
              <ul>
                {% for tag in task.tags.all %}
                  <li>{{ tag.name }}</li>
                {% endfor %}
              </ul>
            </div>
            <div>
              {% if task.is_done %}
                <a href="{% url 'exam:task-complete' pk=task.id %}" class="btn btn-secondary">Undo</a>
              {% else %}
                <a href="{% url 'exam:task-complete' pk=task.id %}" class="btn btn-success">Complete</a>
              {% endif %}
            </div>
          </div>
        </div>
        <a href="{% url 'exam:task-update' pk=task.id %}" class="btn btn-primary">Update</a>
        <a href="{% url 'exam:task-delete' pk=task.id %}" class="btn btn-danger">Delete</a>
        <br>
      {% endfor %}
    </div>
  {% else %}
    <p>There are no tasks in the TODO list.</p>
  {% endif %}
{% endblock %}
